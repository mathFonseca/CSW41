L 1 "main.c"
N/*----------------------------------------------------------------------------
N * Example to include binary files into an application
N * This uVision project is part of Knowledgebase Article 3770.
N * See http://www.keil.com/support/docs/3770.htm for more details.
N *---------------------------------------------------------------------------*/
N
N// these variables are defined in the assembler source file MyBinFile1.s and represent the data from MyBinFile1.bin 
Nextern const unsigned char MyBinaryImage1[];
Nextern const unsigned long MyBinaryImage1_length; // this constant is calculated in the assembler source file
N
N#include "MyBinFile2.h"                           // This file is generated by the srec_cat conversion utility
L 1 "MyBinFile2.h" 1
N#ifndef MYBINFILE2_H
N#define MYBINFILE2_H
N
Nextern const unsigned long MyBinaryImage2_termination;
Nextern const unsigned long MyBinaryImage2_start;
Nextern const unsigned long MyBinaryImage2_finish;
Nextern const unsigned long MyBinaryImage2_length;
Nextern const unsigned char MyBinaryImage2[];
N
N#endif /* MYBINFILE2_H */
L 12 "main.c" 2
N
Nunsigned int ChecksumImg1;
Nunsigned int ChecksumImg2;
N
N
Nint main (void) {
N  unsigned int i;
N  unsigned int checksum;
N
N  // Calculate simple checksums of both binary images to show that the size of the images can be used
N  checksum = 0;
N  for (i = 0; i < MyBinaryImage1_length; i++) {  // the constant MyBinaryImage1_length is calculated in the assembler file MyBinFile1.s
N    checksum += MyBinaryImage1[i];
N  }
N  ChecksumImg1 = checksum;
N
N  checksum = 0;
N  for (i = 0; i < MyBinaryImage2_length; i++) {  // the constant MyBinaryImage2_length is generated by the srec_cat utility
N    checksum += MyBinaryImage2[i];
N  }
N  ChecksumImg2 = checksum;
N
N  while(1);    // main never ends in an embedded application
N}
